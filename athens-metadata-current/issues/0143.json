{
  "url":"https://api.github.com/repos/athensresearch/athens/issues/143",
  "repository_url":"https://api.github.com/repos/athensresearch/athens",
  "labels_url":"https://api.github.com/repos/athensresearch/athens/issues/143/labels{/name}",
  "comments_url":"https://api.github.com/repos/athensresearch/athens/issues/143/comments",
  "events_url":"https://api.github.com/repos/athensresearch/athens/issues/143/events",
  "html_url":"https://github.com/athensresearch/athens/pull/143",
  "id":637558996,
  "node_id":"MDExOlB1bGxSZXF1ZXN0NDMzNTIzMDUz",
  "number":143,
  "title":"Add Dockerfile for quick and easy evaluation",
  "user":{
    "login":"nightscape",
    "id":35170,
    "node_id":"MDQ6VXNlcjM1MTcw",
    "avatar_url":"https://avatars3.githubusercontent.com/u/35170?v=4",
    "gravatar_id":"",
    "url":"https://api.github.com/users/nightscape",
    "html_url":"https://github.com/nightscape",
    "followers_url":"https://api.github.com/users/nightscape/followers",
    "following_url":"https://api.github.com/users/nightscape/following{/other_user}",
    "gists_url":"https://api.github.com/users/nightscape/gists{/gist_id}",
    "starred_url":"https://api.github.com/users/nightscape/starred{/owner}{/repo}",
    "subscriptions_url":"https://api.github.com/users/nightscape/subscriptions",
    "organizations_url":"https://api.github.com/users/nightscape/orgs",
    "repos_url":"https://api.github.com/users/nightscape/repos",
    "events_url":"https://api.github.com/users/nightscape/events{/privacy}",
    "received_events_url":"https://api.github.com/users/nightscape/received_events",
    "type":"User",
    "site_admin":false
  },
  "labels":[],
  "state":"closed",
  "locked":false,
  "assignee":null,
  "assignees":[],
  "milestone":null,
  "created_at":"2020-06-12 07:50:28 UTC",
  "updated_at":"2020-06-14 21:44:27 UTC",
  "closed_at":"2020-06-14 16:48:36 UTC",
  "author_association":"CONTRIBUTOR",
  "active_lock_reason":null,
  "pull_request":{
    "url":"https://api.github.com/repos/athensresearch/athens/pulls/143",
    "html_url":"https://github.com/athensresearch/athens/pull/143",
    "diff_url":"https://github.com/athensresearch/athens/pull/143.diff",
    "patch_url":"https://github.com/athensresearch/athens/pull/143.patch"
  },
  "body":"Complete Clojure noob here :wink: \r\nAdding a Docker build allows people to quickly get started with their own instance of Athens.\r\nIn a further step one could also consider adding an automated build on Docker Hub so that one can run the newest version by a simple\r\n```\r\ndocker run athensresearch/athens:latest\r\n```\r\nThe build sequence in the Dockerfile might not be optimal.\r\nI made the assumption that JS dependencies will change less often and moved the `yarn` part above the `lein` parts (so that the cache can be reused between builds if the JS dependencies didn't change).\r\nI also introduced a `compile` step in `project.clj` that is run in the Docker build to reduce compile time when the container actually starts. For whatever reason it still recompiles ~150 files when running the container.\r\n\r\nLet me know what you think about it!",
  "performed_via_github_app":null,
  "comments":[
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/643314878",
      "html_url":"https://github.com/athensresearch/athens/pull/143#issuecomment-643314878",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/143",
      "id":643314878,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY0MzMxNDg3OA==",
      "user":{
        "login":"tangjeff0",
        "id":8952138,
        "node_id":"MDQ6VXNlcjg5NTIxMzg=",
        "avatar_url":"https://avatars1.githubusercontent.com/u/8952138?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/tangjeff0",
        "html_url":"https://github.com/tangjeff0",
        "followers_url":"https://api.github.com/users/tangjeff0/followers",
        "following_url":"https://api.github.com/users/tangjeff0/following{/other_user}",
        "gists_url":"https://api.github.com/users/tangjeff0/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/tangjeff0/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/tangjeff0/subscriptions",
        "organizations_url":"https://api.github.com/users/tangjeff0/orgs",
        "repos_url":"https://api.github.com/users/tangjeff0/repos",
        "events_url":"https://api.github.com/users/tangjeff0/events{/privacy}",
        "received_events_url":"https://api.github.com/users/tangjeff0/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-06-12 14:53:12 UTC",
      "updated_at":"2020-06-12 14:53:12 UTC",
      "author_association":"MEMBER",
      "body":"Awesome first PR @nightscape. I love Docker but I'm not sure it's completely necessary. There are two contexts where Docker might be used:\r\n\r\n- development\r\n- production\r\n\r\nIf someone is developing Athens, they will ultimately be running scripts like [linting and testing](https://github.com/athensresearch/athens/blob/master/CONTRIBUTING.md#running-ci-scripts-locally). In this case, they would need to SSH into the container to run these scripts. Is Docker that much easier than setting up a dev environment locally? Especially if they are learning Clojure, they will probably already have these dependencies locally.\r\n\r\nFor production, all we have is a frontend bundle of HTML and JS. This could be easily downloaded and opened. Furthermore, it won't be long before we have a Desktop app that is even easier to run.\r\n\r\nIf we do have a self-hosted backend, which won't be for a long while, the nice thing about Clojure is that it can be distributed as a Jar file â€” it's already cross-platform.\r\n\r\nWe don't have many system dependencies, we aren't leveraging cloud VMs or containers, and this is a web app. I love Docker, but for these reasons I'm not sure we need Docker now.\r\n\r\nWhat are your thoughts here @nightscape ? ",
      "performed_via_github_app":null
    },
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/643743088",
      "html_url":"https://github.com/athensresearch/athens/pull/143#issuecomment-643743088",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/143",
      "id":643743088,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY0Mzc0MzA4OA==",
      "user":{
        "login":"nightscape",
        "id":35170,
        "node_id":"MDQ6VXNlcjM1MTcw",
        "avatar_url":"https://avatars3.githubusercontent.com/u/35170?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/nightscape",
        "html_url":"https://github.com/nightscape",
        "followers_url":"https://api.github.com/users/nightscape/followers",
        "following_url":"https://api.github.com/users/nightscape/following{/other_user}",
        "gists_url":"https://api.github.com/users/nightscape/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/nightscape/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/nightscape/subscriptions",
        "organizations_url":"https://api.github.com/users/nightscape/orgs",
        "repos_url":"https://api.github.com/users/nightscape/repos",
        "events_url":"https://api.github.com/users/nightscape/events{/privacy}",
        "received_events_url":"https://api.github.com/users/nightscape/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-06-14 09:43:30 UTC",
      "updated_at":"2020-06-14 09:43:53 UTC",
      "author_association":"CONTRIBUTOR",
      "body":"I would say it's useful for people like me who are new to Clojure development and want to quickly try out Athens without finding out how to properly install lein and yarn on their machine (which, depending on your distribution might be more or less straightforward).\r\nFor people who have a Kubernetes cluster it's also the best option to deploy Athens there, although for a real deployment the Dockerfile should be tweaked to create a smaller image (which can be done as a second step).",
      "performed_via_github_app":null
    },
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/643743514",
      "html_url":"https://github.com/athensresearch/athens/pull/143#issuecomment-643743514",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/143",
      "id":643743514,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY0Mzc0MzUxNA==",
      "user":{
        "login":"nightscape",
        "id":35170,
        "node_id":"MDQ6VXNlcjM1MTcw",
        "avatar_url":"https://avatars3.githubusercontent.com/u/35170?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/nightscape",
        "html_url":"https://github.com/nightscape",
        "followers_url":"https://api.github.com/users/nightscape/followers",
        "following_url":"https://api.github.com/users/nightscape/following{/other_user}",
        "gists_url":"https://api.github.com/users/nightscape/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/nightscape/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/nightscape/subscriptions",
        "organizations_url":"https://api.github.com/users/nightscape/orgs",
        "repos_url":"https://api.github.com/users/nightscape/repos",
        "events_url":"https://api.github.com/users/nightscape/events{/privacy}",
        "received_events_url":"https://api.github.com/users/nightscape/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-06-14 09:48:17 UTC",
      "updated_at":"2020-06-14 09:48:17 UTC",
      "author_association":"CONTRIBUTOR",
      "body":"Regarding linting and testing: you don't need to SSH into your container (in fact, it's an antipattern to have an SSH server running in a Docker container).\r\nInstead, you can\r\n```\r\ndocker run -it athens lein do-linting-stuff-and-run-testy\r\n```\r\nto run lint or tests in a new container instance or\r\n```\r\ndocker exec -it running-athens-container bash\r\n```\r\nto log into a running container and run everything from there.",
      "performed_via_github_app":null
    },
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/643790785",
      "html_url":"https://github.com/athensresearch/athens/pull/143#issuecomment-643790785",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/143",
      "id":643790785,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY0Mzc5MDc4NQ==",
      "user":{
        "login":"tangjeff0",
        "id":8952138,
        "node_id":"MDQ6VXNlcjg5NTIxMzg=",
        "avatar_url":"https://avatars1.githubusercontent.com/u/8952138?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/tangjeff0",
        "html_url":"https://github.com/tangjeff0",
        "followers_url":"https://api.github.com/users/tangjeff0/followers",
        "following_url":"https://api.github.com/users/tangjeff0/following{/other_user}",
        "gists_url":"https://api.github.com/users/tangjeff0/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/tangjeff0/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/tangjeff0/subscriptions",
        "organizations_url":"https://api.github.com/users/tangjeff0/orgs",
        "repos_url":"https://api.github.com/users/tangjeff0/repos",
        "events_url":"https://api.github.com/users/tangjeff0/events{/privacy}",
        "received_events_url":"https://api.github.com/users/tangjeff0/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-06-14 16:36:24 UTC",
      "updated_at":"2020-06-14 16:36:24 UTC",
      "author_association":"MEMBER",
      "body":"Awesome, forgot how easy it was to execute commands in a docker process!\r\n\r\nNext steps: would you like to add a section to CONTRIBUTING for running Athens with Docker? @nightscape ",
      "performed_via_github_app":null
    }
  ]
}
