{
  "url":"https://api.github.com/repos/athensresearch/athens/issues/97",
  "repository_url":"https://api.github.com/repos/athensresearch/athens",
  "labels_url":"https://api.github.com/repos/athensresearch/athens/issues/97/labels{/name}",
  "comments_url":"https://api.github.com/repos/athensresearch/athens/issues/97/comments",
  "events_url":"https://api.github.com/repos/athensresearch/athens/issues/97/events",
  "html_url":"https://github.com/athensresearch/athens/issues/97",
  "id":626076075,
  "node_id":"MDU6SXNzdWU2MjYwNzYwNzU=",
  "number":97,
  "title":"Blocks",
  "user":{
    "login":"tangjeff0",
    "id":8952138,
    "node_id":"MDQ6VXNlcjg5NTIxMzg=",
    "avatar_url":"https://avatars1.githubusercontent.com/u/8952138?v=4",
    "gravatar_id":"",
    "url":"https://api.github.com/users/tangjeff0",
    "html_url":"https://github.com/tangjeff0",
    "followers_url":"https://api.github.com/users/tangjeff0/followers",
    "following_url":"https://api.github.com/users/tangjeff0/following{/other_user}",
    "gists_url":"https://api.github.com/users/tangjeff0/gists{/gist_id}",
    "starred_url":"https://api.github.com/users/tangjeff0/starred{/owner}{/repo}",
    "subscriptions_url":"https://api.github.com/users/tangjeff0/subscriptions",
    "organizations_url":"https://api.github.com/users/tangjeff0/orgs",
    "repos_url":"https://api.github.com/users/tangjeff0/repos",
    "events_url":"https://api.github.com/users/tangjeff0/events{/privacy}",
    "received_events_url":"https://api.github.com/users/tangjeff0/received_events",
    "type":"User",
    "site_admin":false
  },
  "labels":[
    {
      "id":2092499241,
      "node_id":"MDU6TGFiZWwyMDkyNDk5MjQx",
      "url":"https://api.github.com/repos/athensresearch/athens/labels/design:%20%E2%9D%87%EF%B8%8F",
      "name":"design: ‚ùáÔ∏è",
      "color":"6f6f6f",
      "default":false,
      "description":"design in progress"
    },
    {
      "id":2092478123,
      "node_id":"MDU6TGFiZWwyMDkyNDc4MTIz",
      "url":"https://api.github.com/repos/athensresearch/athens/labels/type:%20%F0%9F%9A%80%20feature",
      "name":"type: üöÄ feature",
      "color":"0075ca",
      "default":false,
      "description":"Must be on https://github.com/athensresearch/athens/projects/2"
    }
  ],
  "state":"open",
  "locked":false,
  "assignee":{
    "login":"tangjeff0",
    "id":8952138,
    "node_id":"MDQ6VXNlcjg5NTIxMzg=",
    "avatar_url":"https://avatars1.githubusercontent.com/u/8952138?v=4",
    "gravatar_id":"",
    "url":"https://api.github.com/users/tangjeff0",
    "html_url":"https://github.com/tangjeff0",
    "followers_url":"https://api.github.com/users/tangjeff0/followers",
    "following_url":"https://api.github.com/users/tangjeff0/following{/other_user}",
    "gists_url":"https://api.github.com/users/tangjeff0/gists{/gist_id}",
    "starred_url":"https://api.github.com/users/tangjeff0/starred{/owner}{/repo}",
    "subscriptions_url":"https://api.github.com/users/tangjeff0/subscriptions",
    "organizations_url":"https://api.github.com/users/tangjeff0/orgs",
    "repos_url":"https://api.github.com/users/tangjeff0/repos",
    "events_url":"https://api.github.com/users/tangjeff0/events{/privacy}",
    "received_events_url":"https://api.github.com/users/tangjeff0/received_events",
    "type":"User",
    "site_admin":false
  },
  "assignees":[
    {
      "login":"tangjeff0",
      "id":8952138,
      "node_id":"MDQ6VXNlcjg5NTIxMzg=",
      "avatar_url":"https://avatars1.githubusercontent.com/u/8952138?v=4",
      "gravatar_id":"",
      "url":"https://api.github.com/users/tangjeff0",
      "html_url":"https://github.com/tangjeff0",
      "followers_url":"https://api.github.com/users/tangjeff0/followers",
      "following_url":"https://api.github.com/users/tangjeff0/following{/other_user}",
      "gists_url":"https://api.github.com/users/tangjeff0/gists{/gist_id}",
      "starred_url":"https://api.github.com/users/tangjeff0/starred{/owner}{/repo}",
      "subscriptions_url":"https://api.github.com/users/tangjeff0/subscriptions",
      "organizations_url":"https://api.github.com/users/tangjeff0/orgs",
      "repos_url":"https://api.github.com/users/tangjeff0/repos",
      "events_url":"https://api.github.com/users/tangjeff0/events{/privacy}",
      "received_events_url":"https://api.github.com/users/tangjeff0/received_events",
      "type":"User",
      "site_admin":false
    }
  ],
  "milestone":null,
  "created_at":"2020-05-27 22:25:46 UTC",
  "updated_at":"2020-07-21 17:27:22 UTC",
  "closed_at":null,
  "author_association":"MEMBER",
  "active_lock_reason":null,
  "body":"# Tasks\r\n\r\n#183 #221 #224 #209 #226 \r\n\r\n- [ ] tests for all this\r\n- [ ] copy and paste\r\n- [ ] ctrl-z\r\n- [ ] context menu\r\n- [x] block selection\r\n- [X] text selection\r\n- [x] cmd+b bold\r\n- [x] cmd+i italics\r\n- [x] cmd+enter to cycle through TODOs\r\n- [x] `[[]]` and `(())` creates auto-complete (get-caret)\r\n- [x] `/` creates slash commands menu (get-caret #59 )\r\n- [x] backspace\r\n- [x] drag and drop #241 \r\n- [X] tab, shift-tab\r\n- [x] enter\r\n- [x] arrow-keys\r\n- [x] debounce\r\n\r\n### Original Post\r\n\r\n<details>\r\n  <summary>Click to open</summary>\r\n\r\nRelated: #60 \r\n\r\n**06-26-2020**  Not much to say, just been doing hardcore study and engineering. Went really deep on datalog #183 and DOM fundamentals #158 \r\n\r\n**06-16-2020** Resource I've been using for understanding DOM events (part 2): https://javascript.info/\r\n\r\nScopes for block writing:\r\n1. block selection ‚Äì user should only ever be able to edit one block at a given time\r\n1. keybindings (#64) ‚Äì listed the core _structural_ keybindings below\r\n1. drag and drop ‚Äì should show user where their drop will land to re-order block\r\n1. text selection\r\n   1. clicking on a block should drop the text cursor to the correct character\r\n   1. markup keybindings, e.g. **bold** and unbold should keep the correct characters selected\r\n\r\n**06-11-2020 later**\r\n\r\n- read: refactor old pages/blocks to be usable by designers and others building off of pages (@shanberg @Bardia95). This is all done except for (un)linked references.\r\n- write: lots to do here, will need to be a few PRs\r\n  - keypress: going to implement a global lib for this, probably [re-pressed](https://github.com/gadfly361/re-pressed)\r\n    - `tab`/`shift-tab` indent/unindent\r\n    -  `up`/`down` to move between blocks\r\n    - `enter` creates a new block\r\n    - `backspace` on an empty block deletes it\r\n  - click\r\n    - on block: turn into editable block. May need to ask @Bardia95 and @jelmerderonde what they recommend as best path forward here\r\n    - out of block: write `:block/string` datom\r\n\r\n**06-11-2020**: Early thoughts. There are a few different components that might use the base-level block component:\r\n\r\n1. node page (where the page is a link), and its child blocks\r\n1. block page (where the page is zoomed in on a block), and its child blocks\r\n   - must show context (find parents)\r\n1. block embed `{{embed: ((uid))}}` ‚Äî simplest one I believe\r\n1. (un)linked references\r\n   - must show context for each reference (find parents)\r\n   - does a groupBy `:node/title`\r\n1. right sidebar, or how we can open/collapse _pages_ as if they were blocks\r\n\r\nSo, thinking of combining #96 with #97. Still unsure of how these components will map to isolated scopes.\r\n\r\n## Node Page\r\n\r\n![Screen Shot 2020-06-11 at 7 21 48 AM](https://user-images.githubusercontent.com/8952138/84379669-37fcd180-abb4-11ea-868d-a7f9c9eb6d1b.png)\r\n\r\n## Block Page\r\n\r\n![Screen Shot 2020-06-11 at 7 21 36 AM](https://user-images.githubusercontent.com/8952138/84379646-316e5a00-abb4-11ea-9923-cc364f2b9d8f.png)\r\n\r\n## (Un)linked References\r\n\r\n![Screen Shot 2020-06-11 at 7 27 08 AM](https://user-images.githubusercontent.com/8952138/84380210-f91b4b80-abb4-11ea-8d86-8049810d10ef.png)\r\n\r\n<details>",
  "performed_via_github_app":null,
  "comments":[
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/660484959",
      "html_url":"https://github.com/athensresearch/athens/issues/97#issuecomment-660484959",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/97",
      "id":660484959,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQ4NDk1OQ==",
      "user":{
        "login":"shanberg",
        "id":98312,
        "node_id":"MDQ6VXNlcjk4MzEy",
        "avatar_url":"https://avatars0.githubusercontent.com/u/98312?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/shanberg",
        "html_url":"https://github.com/shanberg",
        "followers_url":"https://api.github.com/users/shanberg/followers",
        "following_url":"https://api.github.com/users/shanberg/following{/other_user}",
        "gists_url":"https://api.github.com/users/shanberg/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/shanberg/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/shanberg/subscriptions",
        "organizations_url":"https://api.github.com/users/shanberg/orgs",
        "repos_url":"https://api.github.com/users/shanberg/repos",
        "events_url":"https://api.github.com/users/shanberg/events{/privacy}",
        "received_events_url":"https://api.github.com/users/shanberg/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-07-18 13:43:14 UTC",
      "updated_at":"2020-07-18 13:43:14 UTC",
      "author_association":"MEMBER",
      "body":"Brief test/review\r\n\r\n- Editing\r\n    - Lose cursor position on indent/unindent while writing\r\n    - Occasional appearance focus ring (when switching away from and back to Athens, then creating a new block?)\r\n    - Parent block feels slow to expand height when I‚Äôm typing in a child‚Äôs textarea and the textarea size changes\r\n- Indenting\r\n    - Tab to indent indents the wrong block sometimes\r\n        - Repro:\r\n            - Write a block\r\n            - Quickly press return (to create a new block below), then tab (to indent it)\r\n            - Observe indent occurs on wrong block\r\n    - Should unindenting move block to end of parent order, or split the tree at the same ordinal space?\r\n        - End of order: logically simpler, but visually surprising/disorienting\r\n        - Split the tree: visually easier to follow, less disorienting.\r\n        - End of order makes it feel like the text is heavy and stiff\r\n        - Splitting makes it feel like the text is light and pliable\r\n    - Can I add a normal tab character?\r\n- Selecting\r\n    - If I try indenting a selection, should it always work, always work as much as it can, or only work if all can?\r\n        - Maybe selection should work/feel more like Notion, where if a parent and all children are in the selection, selection events (and appearance) only apply to the parent\r\n    - Can I select with a box?\r\n    - Drag-select appears additive-only, but because of the minimal feedback associated with creating a drag-selection, I‚Äôm unlikely to make the correct selection the first time. I‚Äôm more likely to make a too-large selection, then undo and make a smaller selection.\r\n",
      "performed_via_github_app":null
    },
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/660559397",
      "html_url":"https://github.com/athensresearch/athens/issues/97#issuecomment-660559397",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/97",
      "id":660559397,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY2MDU1OTM5Nw==",
      "user":{
        "login":"tangjeff0",
        "id":8952138,
        "node_id":"MDQ6VXNlcjg5NTIxMzg=",
        "avatar_url":"https://avatars1.githubusercontent.com/u/8952138?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/tangjeff0",
        "html_url":"https://github.com/tangjeff0",
        "followers_url":"https://api.github.com/users/tangjeff0/followers",
        "following_url":"https://api.github.com/users/tangjeff0/following{/other_user}",
        "gists_url":"https://api.github.com/users/tangjeff0/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/tangjeff0/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/tangjeff0/subscriptions",
        "organizations_url":"https://api.github.com/users/tangjeff0/orgs",
        "repos_url":"https://api.github.com/users/tangjeff0/repos",
        "events_url":"https://api.github.com/users/tangjeff0/events{/privacy}",
        "received_events_url":"https://api.github.com/users/tangjeff0/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-07-18 23:52:33 UTC",
      "updated_at":"2020-07-18 23:58:48 UTC",
      "author_association":"MEMBER",
      "body":"> appearance focus ring\r\n  - what's this?\r\n> Should unindenting move block to end of parent order\r\n  - end of order is what Workflowy and Roam do, so that's why it's that right now.\r\n> Can I add a normal tab character?\r\n  - [idk can we](https://www.youtube.com/watch?v=SsoOG6ZeyUI)\r\n> If I try indenting a selection, should it always work, always work as much as it can, or only work if all can?\r\n  - Good question. Workflowy and Roam have this partial indent thing, where they only indent the left-most blocks. I don't know how I feel about it.\r\n> Can I select with a box?\r\n  - what box?\r\n> Drag-select appears additive-only.\r\n  - Should be able to make this flexible/redoable.\r\n",
      "performed_via_github_app":null
    },
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/660703998",
      "html_url":"https://github.com/athensresearch/athens/issues/97#issuecomment-660703998",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/97",
      "id":660703998,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY2MDcwMzk5OA==",
      "user":{
        "login":"shanberg",
        "id":98312,
        "node_id":"MDQ6VXNlcjk4MzEy",
        "avatar_url":"https://avatars0.githubusercontent.com/u/98312?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/shanberg",
        "html_url":"https://github.com/shanberg",
        "followers_url":"https://api.github.com/users/shanberg/followers",
        "following_url":"https://api.github.com/users/shanberg/following{/other_user}",
        "gists_url":"https://api.github.com/users/shanberg/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/shanberg/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/shanberg/subscriptions",
        "organizations_url":"https://api.github.com/users/shanberg/orgs",
        "repos_url":"https://api.github.com/users/shanberg/repos",
        "events_url":"https://api.github.com/users/shanberg/events{/privacy}",
        "received_events_url":"https://api.github.com/users/shanberg/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-07-19 20:29:26 UTC",
      "updated_at":"2020-07-19 20:31:24 UTC",
      "author_association":"MEMBER",
      "body":"@tangjeff0 \r\n\r\n**Focus ring**\r\nFocus ring on right:\r\n<img width=\"89\" alt=\"Screen Shot 2020-07-19 at 4 22 55 PM\" src=\"https://user-images.githubusercontent.com/98312/87884393-1aedc680-c9dc-11ea-8152-36834ca1374d.png\">\r\nPR #282 might obsolete this issue.\r\n\r\n**Unindenting to edge**\r\nI think it‚Äôs worth thinking about sometime later down the road. Probably want to keep it as it is, but maaaaybe we could add some visual indication of what's moved where. Highlight the moved block for a second, maybe.\r\n\r\n**Tabs**\r\nNerds can probably paste a tab character if they want. Maybe tabbing behaves differently in a prose writing mode, or something.\r\nAlso: [Default to tabs instead of spaces for an 'accessible first' environment\r\n](https://alexandersandberg.com/tabs-for-accessibility/)\r\n\r\n**Indenting Selections**\r\nI think this gets to the nature of tree selection. At the moment I think it‚Äôs weird that we allow selecting both a parent and its children as distinct selections. I think in those cases the selection should be rolled up to just the parent, and any/most actions performed on the parent should apply to the children as well. There may be cases where that's undesirable, but I think indentation is not one of those.\r\n\r\n**Drag-selection**\r\nLike in Notion. Dragging creates a box and anything block the box touches is added to the selection.",
      "performed_via_github_app":null
    },
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/661083378",
      "html_url":"https://github.com/athensresearch/athens/issues/97#issuecomment-661083378",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/97",
      "id":661083378,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY2MTA4MzM3OA==",
      "user":{
        "login":"tangjeff0",
        "id":8952138,
        "node_id":"MDQ6VXNlcjg5NTIxMzg=",
        "avatar_url":"https://avatars1.githubusercontent.com/u/8952138?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/tangjeff0",
        "html_url":"https://github.com/tangjeff0",
        "followers_url":"https://api.github.com/users/tangjeff0/followers",
        "following_url":"https://api.github.com/users/tangjeff0/following{/other_user}",
        "gists_url":"https://api.github.com/users/tangjeff0/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/tangjeff0/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/tangjeff0/subscriptions",
        "organizations_url":"https://api.github.com/users/tangjeff0/orgs",
        "repos_url":"https://api.github.com/users/tangjeff0/repos",
        "events_url":"https://api.github.com/users/tangjeff0/events{/privacy}",
        "received_events_url":"https://api.github.com/users/tangjeff0/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-07-20 14:42:37 UTC",
      "updated_at":"2020-07-20 20:18:16 UTC",
      "author_association":"MEMBER",
      "body":"**Tabs**\r\n\r\n> Nerds can probably paste a tab character if they want \r\n\r\nüòÇ  on a more serious note, we will want true tabbing in triple backtick codeblocks. There is probably a general solution to this.\r\n\r\n**Indenting Selections**\r\n\r\nYup, working on this. I believe we can use `goog.dom.findCommonAncestor` to roll up selections into parents.\r\n\r\n**Drag-selection**\r\n\r\nI want that too, but not my personal priority. This is CSS heavy, so I encourage you take it on if you want to!",
      "performed_via_github_app":null
    },
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/661320761",
      "html_url":"https://github.com/athensresearch/athens/issues/97#issuecomment-661320761",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/97",
      "id":661320761,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY2MTMyMDc2MQ==",
      "user":{
        "login":"alaq",
        "id":1746118,
        "node_id":"MDQ6VXNlcjE3NDYxMTg=",
        "avatar_url":"https://avatars1.githubusercontent.com/u/1746118?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/alaq",
        "html_url":"https://github.com/alaq",
        "followers_url":"https://api.github.com/users/alaq/followers",
        "following_url":"https://api.github.com/users/alaq/following{/other_user}",
        "gists_url":"https://api.github.com/users/alaq/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/alaq/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/alaq/subscriptions",
        "organizations_url":"https://api.github.com/users/alaq/orgs",
        "repos_url":"https://api.github.com/users/alaq/repos",
        "events_url":"https://api.github.com/users/alaq/events{/privacy}",
        "received_events_url":"https://api.github.com/users/alaq/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-07-20 20:38:24 UTC",
      "updated_at":"2020-07-20 20:38:24 UTC",
      "author_association":"MEMBER",
      "body":"> we will want true tabbing in triple backtick codeblocks. There is probably a general solution to this.\r\n\r\nRoam uses [CodeMirror](https://codemirror.net/) for this. It's extremely versatile and extensible. That sounds like a good solution as well for us.",
      "performed_via_github_app":null
    },
    {
      "url":"https://api.github.com/repos/athensresearch/athens/issues/comments/661998143",
      "html_url":"https://github.com/athensresearch/athens/issues/97#issuecomment-661998143",
      "issue_url":"https://api.github.com/repos/athensresearch/athens/issues/97",
      "id":661998143,
      "node_id":"MDEyOklzc3VlQ29tbWVudDY2MTk5ODE0Mw==",
      "user":{
        "login":"tangjeff0",
        "id":8952138,
        "node_id":"MDQ6VXNlcjg5NTIxMzg=",
        "avatar_url":"https://avatars1.githubusercontent.com/u/8952138?v=4",
        "gravatar_id":"",
        "url":"https://api.github.com/users/tangjeff0",
        "html_url":"https://github.com/tangjeff0",
        "followers_url":"https://api.github.com/users/tangjeff0/followers",
        "following_url":"https://api.github.com/users/tangjeff0/following{/other_user}",
        "gists_url":"https://api.github.com/users/tangjeff0/gists{/gist_id}",
        "starred_url":"https://api.github.com/users/tangjeff0/starred{/owner}{/repo}",
        "subscriptions_url":"https://api.github.com/users/tangjeff0/subscriptions",
        "organizations_url":"https://api.github.com/users/tangjeff0/orgs",
        "repos_url":"https://api.github.com/users/tangjeff0/repos",
        "events_url":"https://api.github.com/users/tangjeff0/events{/privacy}",
        "received_events_url":"https://api.github.com/users/tangjeff0/received_events",
        "type":"User",
        "site_admin":false
      },
      "created_at":"2020-07-21 17:26:29 UTC",
      "updated_at":"2020-07-21 17:27:22 UTC",
      "author_association":"MEMBER",
      "body":"Many small interactions for `/`, `[[]]`, and `(())` such as caret placement after expansion and cases in which dropdown closes/opens. Will probably want a similar checklist for these @shanberg .",
      "performed_via_github_app":null
    }
  ]
}
